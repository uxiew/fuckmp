# fuckmp

一个将 Vue3 单文件组件编译为原生微信小程序的编译器工具。
**Generated by AI**

## 特性

- ✅ **Vue3 支持**: 完整支持 Vue3 Composition API
- ✅ **`<script setup>`**: 支持 `<script setup>` 语法糖
- ✅ **TypeScript**: 原生 TypeScript 支持
- ✅ **SCSS**: 支持 SCSS 预处理器
- ✅ **响应式系统**: 自动转换 Vue3 响应式 API
- ✅ **生命周期**: 完整的生命周期钩子映射
- ✅ **组件系统**: 支持组件化开发
- ✅ **事件系统**: 完整的事件处理和 v-model 支持
- ✅ **模块化**: 清晰的编译器架构设计

## 快速开始

### 安装

```bash
npm install -g @vue3-miniprogram/compiler
# 或
pnpm add -g @vue3-miniprogram/compiler
```

### 创建项目

```bash
# 创建新项目
vue3-mp create my-miniprogram

# 使用 TypeScript 模板
vue3-mp create my-miniprogram --typescript --scss

cd my-miniprogram
pnpm install
```

### 开发

```bash
# 开发模式 (监听文件变化)
pnpm dev

# 构建项目
pnpm build

# 生产构建
pnpm build:prod
```

## 项目结构

```
src/
├── app.vue              # 应用入口
├── pages/               # 页面目录
│   └── index/
│       └── index.vue    # 首页
├── components/          # 组件目录
│   └── HelloWorld.vue   # 示例组件
└── utils/               # 工具函数
```

## Vue3 语法支持

### Composition API

```vue
<template>
  <view class="counter">
    <text>{{ count }}</text>
    <button @tap="increment">+1</button>
  </view>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'

const count = ref(0)
const doubleCount = computed(() => count.value * 2)

const increment = () => {
  count.value++
}

onMounted(() => {
  console.log('组件已挂载')
})
</script>
```

### Props 和 Emits

```vue
<template>
  <view @tap="handleClick">
    <text>{{ title }}</text>
  </view>
</template>

<script setup lang="ts">
interface Props {
  title: string
  count?: number
}

const props = defineProps<Props>()

const emit = defineEmits<{
  click: [value: number]
  update: [data: any]
}>()

const handleClick = () => {
  emit('click', props.count || 0)
}
</script>
```

### 响应式数据

```vue
<script setup lang="ts">
import { ref, reactive, computed, watch } from 'vue'

// ref
const message = ref('Hello World')

// reactive
const state = reactive({
  user: { name: 'Vue3', age: 4 },
  loading: false
})

// computed
const displayName = computed(() => {
  return `${state.user.name} (${state.user.age}岁)`
})

// watch
watch(message, (newVal, oldVal) => {
  console.log(`消息从 ${oldVal} 变为 ${newVal}`)
})
</script>
```

## 编译配置

创建 `vue3mp.config.js` 配置文件：

```javascript
module.exports = {
  input: 'src',
  output: 'dist',
  appId: 'your-app-id',
  features: {
    scriptSetup: true,
    typescript: true,
    scss: true,
    compositionApi: true,
    emits: true,
    slots: true
  },
  optimization: {
    minify: false,
    sourcemap: true,
    incremental: true
  }
}
```

## CLI 命令

```bash
# 创建项目
vue3-mp create <project-name> [options]

# 构建项目
vue3-mp build [options]

# 开发模式
vue3-mp dev [options]

# 分析项目
vue3-mp analyze [options]

# 清理输出
vue3-mp clean [options]

# 配置管理
vue3-mp config [options]
```

## API 使用

```typescript
import { Vue3MiniprogramCompiler } from '@vue3-miniprogram/compiler'

const compiler = new Vue3MiniprogramCompiler({
  input: 'src',
  output: 'dist',
  appId: 'your-app-id'
})

// 编译整个项目
const result = await compiler.compile()

// 编译单个文件
await compiler.compileFile('src/pages/index/index.vue')

// 监听模式
await compiler.watch()
```

## 支持的 Vue3 特性

| 特性 | 支持状态 | 说明 |
|------|---------|------|
| `<script setup>` | ✅ | 完整支持 |
| Composition API | ✅ | ref, reactive, computed, watch 等 |
| TypeScript | ✅ | 原生支持 |
| Props/Emits | ✅ | defineProps, defineEmits |
| 生命周期 | ✅ | 自动映射到小程序生命周期 |
| 模板语法 | ✅ | v-if, v-for, v-model, 事件处理 |
| 样式 | ✅ | CSS, SCSS, 作用域样式 |
| 插槽 | ✅ | 默认插槽和具名插槽 |
| Provide/Inject | 🚧 | 计划支持 |
| Teleport | ❌ | 小程序不支持 |
| Suspense | ❌ | 小程序不支持 |

## 贡献

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License
