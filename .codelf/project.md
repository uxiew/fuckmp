## Vue3 å¾®ä¿¡å°ç¨‹åºç¼–è¯‘å™¨ (Vue3 to WeChat MiniProgram Compiler)

> ä¸€ä¸ªå°† Vue3 å•æ–‡ä»¶ç»„ä»¶ç¼–è¯‘ä¸ºåŸç”Ÿå¾®ä¿¡å°ç¨‹åºçš„ç¼–è¯‘å™¨å·¥å…·

> æ”¯æŒ Vue3 çš„å®Œæ•´ç‰¹æ€§ï¼ŒåŒ…æ‹¬ `<script setup>`ã€TypeScriptã€SCSSã€å“åº”å¼ç³»ç»Ÿã€åŒå‘ç»‘å®šã€äº‹ä»¶ç³»ç»Ÿç­‰ï¼Œèƒ½å¤Ÿå°†å¤æ‚çš„ Vue3 ç»„ä»¶è½¬æ¢ä¸ºé«˜è´¨é‡çš„å¾®ä¿¡å°ç¨‹åºä»£ç 

> é¡¹ç›®çŠ¶æ€ï¼šğŸ‰ ç”Ÿäº§å°±ç»ª - æ ¸å¿ƒç¼–è¯‘åŠŸèƒ½å·²å®ç°å¹¶é€šè¿‡ç»¼åˆæµ‹è¯•ï¼Œå“åº”å¼ç³»ç»ŸåŸºäº @vue/reactivity é‡æ„ï¼ŒWXML ç¼–è¯‘é”™è¯¯å·²ä¿®å¤ï¼ŒAST æ¨¡æ¿è½¬æ¢å™¨å®Œç¾å®ç°ï¼Œå¯ç¨³å®šç¼–è¯‘ Vue3 é¡¹ç›®ä¸ºå°ç¨‹åºæ ¼å¼

> å¼€å‘å›¢é˜Ÿï¼šä¸ªäººé¡¹ç›®

> æŠ€æœ¯æ ˆï¼šTypeScript 5.6+ã€Node.jsã€Vue3 ç¼–è¯‘å™¨ã€Babelã€PostCSSã€SCSSã€Vitest æµ‹è¯•æ¡†æ¶ã€pnpm åŒ…ç®¡ç†



## Dependencies

* @vue/compiler-sfc (^3.4.0): Vue3 å•æ–‡ä»¶ç»„ä»¶ç¼–è¯‘å™¨ï¼Œç”¨äºè§£æ .vue æ–‡ä»¶
* @vue/reactivity (^3.4.0): Vue3 å®˜æ–¹å“åº”å¼ç³»ç»Ÿï¼Œæ›¿ä»£è‡ªå®šä¹‰å“åº”å¼å®ç°
* @babel/core (^7.23.0): JavaScript ç¼–è¯‘å™¨ï¼Œç”¨äº AST è½¬æ¢å’Œä»£ç ç”Ÿæˆ
* @babel/parser (^7.23.0): JavaScript è§£æå™¨ï¼Œç”¨äºè§£æ script éƒ¨åˆ†
* @babel/traverse (^7.23.0): AST éå†å·¥å…·ï¼Œç”¨äºè½¬æ¢è¯­æ³•æ ‘
* @babel/types (^7.23.0): AST èŠ‚ç‚¹ç±»å‹å®šä¹‰
* sass (^1.69.0): SCSS ç¼–è¯‘å™¨ï¼Œç”¨äºæ ·å¼é¢„å¤„ç†
* postcss (^8.4.0): CSS åå¤„ç†å™¨ï¼Œç”¨äºæ ·å¼è½¬æ¢å’Œä¼˜åŒ–
* chokidar (^3.5.0): æ–‡ä»¶ç›‘å¬å™¨ï¼Œç”¨äºå¼€å‘æ¨¡å¼çƒ­æ›´æ–°
* commander (^11.0.0): CLI å·¥å…·æ¡†æ¶
* typescript (^5.6.0): TypeScript ç¼–è¯‘å™¨
* vitest (^1.0.0): æµ‹è¯•æ¡†æ¶
* eslint (^8.0.0): ä»£ç æ£€æŸ¥å·¥å…·
* prettier (^3.0.0): ä»£ç æ ¼å¼åŒ–å·¥å…·


## Development Environment

> å¼€å‘ç¯å¢ƒè¦æ±‚ï¼š
> - Node.js 18+ (æ¨èä½¿ç”¨ fnm ç®¡ç†ç‰ˆæœ¬)
> - pnpm 8+ (åŒ…ç®¡ç†å·¥å…·)
> - TypeScript 5.6+ (ç±»å‹æ£€æŸ¥)
> - macOS/Linux/Windows (è·¨å¹³å°æ”¯æŒ)

> å¼€å‘å·¥å…·ï¼š
> - VS Code + Vue Language Features æ’ä»¶
> - å¾®ä¿¡å¼€å‘è€…å·¥å…· (ç”¨äºé¢„è§ˆç¼–è¯‘ç»“æœ)

> æ„å»ºè„šæœ¬ï¼š
> - `pnpm dev`: å¼€å‘æ¨¡å¼ï¼Œå¯åŠ¨æ–‡ä»¶ç›‘å¬å’Œçƒ­æ›´æ–°
> - `pnpm build`: æ„å»ºç”Ÿäº§ç‰ˆæœ¬
> - `pnpm test`: è¿è¡Œæµ‹è¯•å¥—ä»¶
> - `pnpm lint`: ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
> - `pnpm type-check`: TypeScript ç±»å‹æ£€æŸ¥


## Structure

> é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ ¸å¿ƒç¼–è¯‘å™¨åˆ†ä¸º parserã€transformerã€generatorã€runtime å››ä¸ªä¸»è¦æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—èŒè´£æ˜ç¡®ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

```
root
â”œâ”€â”€ plan/                           # è®¾è®¡æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ design.md                   # é¡¹ç›®è®¾è®¡æ–‡æ¡£ï¼ŒåŒ…å«æŠ€æœ¯æ–¹æ¡ˆå’Œå®ç°æ€è·¯
â”‚   â”œâ”€â”€ vue-to-miniprogram-compiler-v1.ts  # ç¼–è¯‘å™¨æ¶æ„è®¾è®¡ v1
â”‚   â”œâ”€â”€ vue-to-miniprogram-compiler-v2.ts  # ç¼–è¯‘å™¨æ¶æ„è®¾è®¡ v2 (å¢å¼ºç‰ˆ)
â”‚   â””â”€â”€ vue-to-miniprogram-compiler-v3.ts  # ç¼–è¯‘å™¨æ¶æ„è®¾è®¡ v3 (å®Œæ•´ç‰ˆ)
â”œâ”€â”€ src/                            # âœ… æºä»£ç ç›®å½• (å·²å®Œæˆ)
â”‚   â”œâ”€â”€ index.ts                   # âœ… ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ parser/                    # âœ… SFC è§£æå™¨æ¨¡å— (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… è§£æå™¨å…¥å£ï¼Œå¯¼å‡ºä¸»è¦è§£æåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ sfc-parser.ts          # âœ… Vue SFC æ–‡ä»¶è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ script-parser.ts       # âœ… Script éƒ¨åˆ†è§£æå™¨ï¼Œå¤„ç† <script setup>
â”‚   â”‚   â”œâ”€â”€ template-parser.ts     # âœ… Template éƒ¨åˆ†è§£æå™¨
â”‚   â”‚   â””â”€â”€ style-parser.ts        # âœ… Style éƒ¨åˆ†è§£æå™¨ï¼Œæ”¯æŒ SCSS
â”‚   â”œâ”€â”€ transformer/               # âœ… AST è½¬æ¢å™¨æ¨¡å— (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… è½¬æ¢å™¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ script-transformer.ts  # âœ… Script è½¬æ¢å™¨ï¼Œå¤„ç† Vue3 å®å’Œå“åº”å¼
â”‚   â”‚   â”œâ”€â”€ template-transformer.ts # âœ… Template è½¬æ¢å™¨ï¼ŒVue æ¨¡æ¿åˆ° WXML
â”‚   â”‚   â”œâ”€â”€ style-transformer.ts   # âœ… Style è½¬æ¢å™¨ï¼ŒCSS åˆ° WXSS
â”‚   â”‚   â””â”€â”€ macro-handlers/        # âœ… Vue3 å®å¤„ç†å™¨ (å·²å®Œæˆ)
â”‚   â”‚       â”œâ”€â”€ index.ts           # âœ… å®å¤„ç†å™¨å…¥å£
â”‚   â”‚       â”œâ”€â”€ define-props.ts    # âœ… defineProps å®å¤„ç†
â”‚   â”‚       â”œâ”€â”€ define-emits.ts    # âœ… defineEmits å®å¤„ç†
â”‚   â”‚       â”œâ”€â”€ reactivity.ts      # âœ… ref/reactive/computed å¤„ç†
â”‚   â”‚       â””â”€â”€ lifecycle.ts       # âœ… ç”Ÿå‘½å‘¨æœŸé’©å­å¤„ç†
â”‚   â”œâ”€â”€ generator/                 # âœ… ä»£ç ç”Ÿæˆå™¨æ¨¡å— (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… ç”Ÿæˆå™¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ component-generator.ts # âœ… å°ç¨‹åºç»„ä»¶ä»£ç ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ page-generator.ts      # âœ… å°ç¨‹åºé¡µé¢ä»£ç ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ config-generator.ts    # âœ… é…ç½®æ–‡ä»¶ç”Ÿæˆ (app.json, *.json)
â”‚   â”œâ”€â”€ runtime/                   # âœ… è¿è¡Œæ—¶é€‚é…å±‚ (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… è¿è¡Œæ—¶å…¥å£
â”‚   â”‚   â”œâ”€â”€ reactivity.ts          # âœ… å“åº”å¼ç³»ç»Ÿé€‚é…
â”‚   â”‚   â”œâ”€â”€ lifecycle.ts           # âœ… ç”Ÿå‘½å‘¨æœŸé€‚é…
â”‚   â”‚   â””â”€â”€ event-system.ts        # âœ… äº‹ä»¶ç³»ç»Ÿé€‚é…
â”‚   â”œâ”€â”€ compiler/                  # âœ… ä¸»ç¼–è¯‘å™¨ (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… ç¼–è¯‘å™¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ compiler.ts            # âœ… ä¸»ç¼–è¯‘å™¨ç±»
â”‚   â”‚   â”œâ”€â”€ options.ts             # âœ… ç¼–è¯‘é€‰é¡¹å®šä¹‰
â”‚   â”‚   â””â”€â”€ utils.ts               # âœ… ç¼–è¯‘å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ cli/                       # âœ… CLI å·¥å…· (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… CLI å…¥å£
â”‚   â”‚   â””â”€â”€ commands/              # âœ… CLI å‘½ä»¤
â”‚   â”‚       â”œâ”€â”€ build.ts           # âœ… æ„å»ºå‘½ä»¤
â”‚   â”‚       â””â”€â”€ create.ts          # âœ… åˆ›å»ºé¡¹ç›®å‘½ä»¤
â”‚   â”œâ”€â”€ utils/                     # âœ… å·¥å…·å‡½æ•° (å·²å®Œæˆ)
â”‚   â”‚   â”œâ”€â”€ index.ts               # âœ… å·¥å…·å‡½æ•°å…¥å£
â”‚   â”‚   â”œâ”€â”€ file-utils.ts          # âœ… æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ ast-utils.ts           # âœ… AST æ“ä½œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ path-utils.ts          # âœ… è·¯å¾„å¤„ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ logger.ts              # âœ… æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ types/                     # âœ… ç±»å‹å®šä¹‰ (å·²å®Œæˆ)
â”‚       â”œâ”€â”€ index.ts               # âœ… ç±»å‹å®šä¹‰å…¥å£
â”‚       â”œâ”€â”€ compiler.ts            # âœ… ç¼–è¯‘å™¨ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ vue.ts                 # âœ… Vue ç›¸å…³ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ miniprogram.ts         # âœ… å°ç¨‹åºç›¸å…³ç±»å‹å®šä¹‰
â”œâ”€â”€ tests/                         # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ unit/                      # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ parser/                # è§£æå™¨æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ transformer/           # è½¬æ¢å™¨æµ‹è¯•
â”‚   â”‚   â””â”€â”€ generator/             # ç”Ÿæˆå™¨æµ‹è¯•
â”‚   â”œâ”€â”€ integration/               # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ compiler/              # ç¼–è¯‘å™¨é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ e2e/                       # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”‚   â””â”€â”€ fixtures/              # æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ __fixtures__/              # æµ‹è¯•æ•°æ®
â”œâ”€â”€ test-project/                  # âœ… ç»¼åˆæµ‹è¯•é¡¹ç›® (å·²å®Œæˆ)
â”‚   â”œâ”€â”€ app.vue                    # âœ… åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ pages/                     # âœ… é¡µé¢ç›®å½•
â”‚   â”‚   â”œâ”€â”€ index/index.vue        # âœ… é¦–é¡µ
â”‚   â”‚   â””â”€â”€ profile/index.vue      # âœ… ä¸ªäººä¸­å¿ƒé¡µé¢
â”‚   â””â”€â”€ components/                # âœ… ç»„ä»¶ç›®å½•
â”‚       â”œâ”€â”€ UserCard.vue           # âœ… ç”¨æˆ·å¡ç‰‡ç»„ä»¶
â”‚       â””â”€â”€ LoadingSpinner.vue     # âœ… åŠ è½½åŠ¨ç”»ç»„ä»¶
â”œâ”€â”€ test-output/                   # âœ… ç¼–è¯‘è¾“å‡ºç›®å½• (å·²ç”Ÿæˆ)
â”‚   â”œâ”€â”€ app.js/json/wxml/wxss      # âœ… åº”ç”¨æ–‡ä»¶
â”‚   â”œâ”€â”€ pages/                     # âœ… é¡µé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ components/                # âœ… ç»„ä»¶æ–‡ä»¶
â”‚   â””â”€â”€ project.config.json        # âœ… é¡¹ç›®é…ç½®
â”œâ”€â”€ test-report.md                 # âœ… ç»¼åˆæµ‹è¯•æŠ¥å‘Š
â”œâ”€â”€ examples/                      # ç¤ºä¾‹é¡¹ç›®
â”‚   â”œâ”€â”€ basic/                     # åŸºç¡€ç¤ºä¾‹
â”‚   â”œâ”€â”€ advanced/                  # é«˜çº§ç¤ºä¾‹
â”‚   â””â”€â”€ real-world/                # çœŸå®é¡¹ç›®ç¤ºä¾‹
â”œâ”€â”€ docs/                          # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ api/                       # API æ–‡æ¡£
â”‚   â”œâ”€â”€ guide/                     # ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ examples/                  # ç¤ºä¾‹æ–‡æ¡£
â”œâ”€â”€ .codelf/                       # é¡¹ç›®å…ƒä¿¡æ¯
â”‚   â”œâ”€â”€ project.md                 # é¡¹ç›®æè¿°æ–‡ä»¶
â”‚   â”œâ”€â”€ attention.md               # å¼€å‘æ³¨æ„äº‹é¡¹
â”‚   â””â”€â”€ _changelog.md              # å˜æ›´æ—¥å¿—æ¨¡æ¿
â”œâ”€â”€ package.json                   # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ tsconfig.json                  # TypeScript é…ç½®
â”œâ”€â”€ vitest.config.ts               # æµ‹è¯•é…ç½®
â”œâ”€â”€ eslint.config.js               # ESLint é…ç½®
â”œâ”€â”€ prettier.config.js             # Prettier é…ç½®
â””â”€â”€ README.md                      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```
